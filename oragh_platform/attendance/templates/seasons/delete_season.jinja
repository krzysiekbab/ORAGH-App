{% extends "base.jinja" %}
{% block title %}UsuÅ„ sezon{% endblock %}
{% block page_title %}UsuÅ„ sezon{% endblock %}
{% block content %}
<div class="card border-danger">
  <div class="card-header bg-danger text-white">
    <h5 class="mb-0">âš ï¸ Potwierdzenie usuniÄ™cia</h5>
  </div>
  <div class="card-body">
    <div class="alert alert-warning">
      <strong>Uwaga!</strong> Ta operacja jest nieodwracalna. UsuniÄ™cie sezonu spowoduje rÃ³wnieÅ¼ usuniÄ™cie wszystkich wydarzeÅ„ przypisanych do tego sezonu ({{ season.events.count }}) oraz wszystkich danych o frekwencji dla tych wydarzeÅ„.
    </div>

    {% if season == current_season %}
      <div class="alert alert-danger">
        <strong>OstrzeÅ¼enie!</strong> Ten sezon jest obecnie aktywnym sezonem. Jego usuniÄ™cie moÅ¼e wpÅ‚ynÄ…Ä‡ na dziaÅ‚anie systemu.
      </div>
    {% endif %}
    
    <div class="row mb-4">
      <div class="col-md-6">
        <h6>SzczegÃ³Å‚y sezonu do usuniÄ™cia:</h6>
        <ul class="list-unstyled">
          <li><strong>Nazwa:</strong> {{ season.name }}
            {% if season == current_season %}
              <span class="badge bg-success ms-2">Aktywny</span>
            {% endif %}
          </li>
          <li><strong>Okres:</strong> {{ season.start_date|date:"d.m.Y" }} - {{ season.end_date|date:"d.m.Y" }}</li>
          <li><strong>Status:</strong> 
            {% if season.is_active %}
              âœ… Aktywny
            {% else %}
              âŒ Nieaktywny
            {% endif %}
          </li>
          <li><strong>Liczba wydarzeÅ„:</strong> {{ season.events.count }}</li>
        </ul>
      </div>
    </div>

    <form method="post">
      {% csrf_token %}
      <input type="hidden" name="confirm_delete" value="yes">
      <div class="d-flex justify-content-between">
        <a href="{% url 'manage_seasons' %}" class="btn btn-secondary">
          â† Anuluj
        </a>
        <button type="submit" class="btn btn-danger" onclick="return confirmDelete()">
          ğŸ—‘ï¸ UsuÅ„ sezon
        </button>
      </div>
    </form>
  </div>
</div>

<script>
function confirmDelete() {
    return confirm('Czy na pewno chcesz usunÄ…Ä‡ ten sezon?\n\nTa operacja jest nieodwracalna i usunie wszystkie wydarzenia oraz dane frekwencji przypisane do tego sezonu.');
}
</script>

<style>
.card-border-danger {
    border-color: #dc3545;
}

.alert-warning {
    border-left: 4px solid #ffc107;
}

.alert-danger {
    border-left: 4px solid #dc3545;
}

/* Responsive improvements */
@media (max-width: 768px) {
    .d-flex.justify-content-between {
        flex-direction: column;
        gap: 0.5rem;
    }
    
    .d-flex.justify-content-between .btn {
        width: 100%;
    }
    
    .col-md-6 {
        padding: 0 0.5rem;
    }
}
</style>
{% endblock %}
